---
type Product = {
  image: string; alt: string; title: string; href: string;
  blurb?: string; price?: string; tag?: string;
};
type Props = { title?: string; lead?: string; ctaHref?: string; ctaLabel?: string; products: Product[] };

const {
  title="What we sell",
  lead="Small-batch bonbons and bars with tropical character â€” crafted for gifting and everyday delight.",
  ctaHref="/shop", ctaLabel="View all",
  products=[]
} = Astro.props as Props;
---

<section id="sell" class="sell">
  <div class="container">
    <div class="bar">
      <div>
        <h2 class="h">{title}</h2>
        <p class="lead">{lead}</p>
      </div>
      <a href={ctaHref} class="view">{ctaLabel}</a>
    </div>

    <div class="grid">
      {products.map(p => (
        <article class="card">
          <figure class="ph">
            <img src={p.image} alt={p.alt} loading="lazy" decoding="async" />
          </figure>
          <div class="body">
            <div class="row">
              <h3 class="t">{p.title}</h3>
              {p.tag && <span class="tag">{p.tag}</span>}
            </div>
            {p.blurb && <p class="d">{p.blurb}</p>}
            <div class="row">
              {p.price ? <span class="price">{p.price}</span> : <span></span>}
              <a href={p.href} class="buy">Shop now</a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .sell{background:#0E1113;color:var(--text-warm);padding:3.5rem 0}
  .bar{display:flex;align-items:flex-end;justify-content:space-between;gap:1rem;margin-bottom:1rem}
  .h{font-size:clamp(1.6rem,3.2vw,2.1rem);margin:0}
  .lead{color:var(--muted);margin:.4rem 0 0}
  .view{display:inline-flex;align-items:center;justify-content:center;min-height:44px;padding:.55rem 1rem;border-radius:9999px;
    color:var(--text-warm);border:1px solid rgba(212,163,115,.7)}
  .view:hover{background:rgba(212,163,115,.1)}

  .grid{display:grid;gap:1rem;grid-template-columns:repeat(3,1fr)}
  @media (max-width:1000px){.grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:640px){.grid{grid-template-columns:1fr}}

  .card{background:rgba(255,255,255,.03);border:1px solid rgba(212,163,115,.25);border-radius:20px;overflow:hidden;box-shadow:0 12px 30px rgba(0,0,0,.35)}
  .ph{aspect-ratio:4/3;overflow:hidden}
  .ph img{width:100%;height:100%;object-fit:cover;transform:translateZ(0);transition:transform .3s ease}
  .card:hover .ph img{transform:scale(1.03)}
  .body{padding:1rem}
  .row{display:flex;align-items:center;justify-content:space-between;gap:.75rem}
  .t{margin:.1rem 0 .2rem;font-size:1.05rem}
  .tag{font-size:.72rem;border:1px solid rgba(212,163,115,.6);padding:.2rem .5rem;border-radius:9999px}
  .d{color:var(--muted);margin:.2rem 0 .6rem}
  .price{color:var(--muted)}
  .buy{display:inline-flex;align-items:center;justify-content:center;min-height:44px;padding:.5rem .9rem;border-radius:9999px;
    color:var(--text-warm);background:#6f3f16;border:1px solid #c58a4f}
  .buy:hover{background:#7f4a1c}
</style>
